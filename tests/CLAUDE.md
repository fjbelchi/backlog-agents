# Tests Directory

## Purpose

Validation tests for configuration schema, templates, installation, and core functionality.

## Test Scripts

### `test-config-schema.sh`
Validates configuration schema and presets.

**Tests**:
- Schema file is valid JSON
- All presets conform to schema
- Required fields present in all presets
- Quality gate commands are valid for each stack

**Usage**:
```bash
./tests/test-config-schema.sh
```

**Exit codes**:
- 0: All tests passed
- 1: Schema validation failed
- 2: Preset validation failed

### `test-templates.sh`
Validates ticket templates.

**Tests**:
- All 4 templates exist (TASK, BUG, FEAT, IDEA)
- Frontmatter is valid YAML
- Required sections present
- Markdown formatting valid
- No placeholder values in wrong places

**Usage**:
```bash
./tests/test-templates.sh
```

**Exit codes**:
- 0: All templates valid
- 1: Missing template(s)
- 2: Invalid YAML frontmatter
- 3: Missing required section(s)

### `test-install.sh`
Tests installation process.

**Tests**:
- Install script exists and is executable
- Install to local directory works
- Install to global directory works (with mock)
- Files copied to correct locations
- Permissions set correctly

**Usage**:
```bash
./tests/test-install.sh
```

**Exit codes**:
- 0: Installation successful
- 1: Install script failed
- 2: Files not in expected locations

### `test-skills.sh`
Validates skill files.

**Tests**:
- All skill SKILL.md files exist
- SKILL.md follows expected format
- Commands in plugin.json match skill names
- No broken internal references

**Usage**:
```bash
./tests/test-skills.sh
```

## Running All Tests

```bash
# Run all tests
for test in tests/test-*.sh; do
  echo "Running $test..."
  $test || echo "FAILED: $test"
done
```

Or use a test runner:
```bash
./tests/run-all.sh
```

## CI Integration

Tests should run on:
- Every PR
- Every push to main
- Before releases

Example GitHub Actions:
```yaml
- name: Run validation tests
  run: |
    ./tests/test-config-schema.sh
    ./tests/test-templates.sh
    ./tests/test-install.sh
    ./tests/test-skills.sh
```

## Adding New Tests

1. Create `test-feature.sh` in this directory
2. Make executable: `chmod +x test-feature.sh`
3. Follow naming convention: `test-*.sh`
4. Use consistent exit codes (0=pass, non-zero=fail)
5. Include clear error messages
6. Update this CLAUDE.md

## Test Guidelines

- **Fast**: Tests should complete in seconds
- **Isolated**: Each test independent, no shared state
- **Clear**: Obvious what failed and why
- **Automated**: No manual steps required
- **Repeatable**: Same result every run

## Related Documentation

- `scripts/docs/`: Documentation validation scripts
- `.github/workflows/`: CI configuration
- `docs/contributing/testing.md`: Testing guidelines

<claude-mem-context>
# Recent Activity

<!-- This section is auto-generated by claude-mem. Edit content outside the tags. -->

### Feb 18, 2026

| ID | Time | T | Title | Read |
|----|------|---|-------|------|
| #7154 | 2:45 PM | ðŸŸ£ | Created test directory documentation | ~534 |
</claude-mem-context>