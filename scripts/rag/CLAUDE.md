# RAG Scripts Directory

## Purpose

Retrieval-Augmented Generation (RAG) server and utilities for efficient code search and context retrieval.

## Files

### `server.py`

Flask-based RAG server providing HTTP API for code search.

**Features**:
- ChromaDB for vector storage
- Sentence-transformers for embeddings (all-MiniLM-L6-v2)
- REST API endpoints for search, indexing, and stats
- Health check endpoint

**Usage**:
```bash
# Start server
python3 scripts/rag/server.py --port 8001

# Or via service manager
./scripts/services/start-services.sh
```

**API Endpoints**:
- `GET /health` - Health check
- `POST /search` - Search for code snippets
- `POST /index` - Index new documents
- `GET /stats` - Get collection statistics

**Example Search**:
```bash
curl -X POST http://localhost:8001/search \
  -H "Content-Type: application/json" \
  -d '{"query": "authentication logic", "n_results": 5}'
```

**Example Index**:
```bash
curl -X POST http://localhost:8001/index \
  -H "Content-Type: application/json" \
  -d '{
    "documents": ["function login() { ... }"],
    "metadatas": [{"file": "auth.ts", "line": 10}],
    "ids": ["auth_ts_10"]
  }'
```

## Data Storage

RAG data is stored in:
```
~/.backlog-toolkit/rag/
â”œâ”€â”€ chroma/           # ChromaDB vector database
â””â”€â”€ cache/            # Optional response cache
```

## Dependencies

```bash
pip install flask chromadb sentence-transformers
```

## Configuration

Environment variables:
- `RAG_PORT` - Server port (default: 8001)
- `RAG_DB_PATH` - ChromaDB path (default: ~/.backlog-toolkit/rag/chroma)

## Integration

The RAG server is automatically started by:
- `scripts/services/start-services.sh`
- `claude-with-services.sh`

Skills can query RAG for relevant code context:
```python
import requests

response = requests.post('http://localhost:8001/search', json={
    'query': 'user authentication',
    'n_results': 5
})

results = response.json()['results']
```

## Performance

- **Embedding model**: all-MiniLM-L6-v2 (fast, lightweight)
- **Vector dimensions**: 384
- **Typical query time**: 10-50ms
- **Memory usage**: ~200MB base + indexed documents

## Related Documentation

- [Service Management](../services/README.md)
- [Complete Setup Guide](../../docs/tutorials/complete-setup-guide.md)


<claude-mem-context>
# Recent Activity

<!-- This section is auto-generated by claude-mem. Edit content outside the tags. -->

### Feb 19, 2026

| ID | Time | T | Title | Read |
|----|------|---|-------|------|
| #8111 | 6:24 PM | ðŸ”µ | RAG Client Shell Interface | ~199 |
| #8110 | " | ðŸ”µ | RAG Client Configuration Verified | ~185 |
</claude-mem-context>