# RAG Scripts Directory

## Purpose

Retrieval-Augmented Generation (RAG) server and utilities for efficient code search and context retrieval.

## Files

### `server.py`

Flask-based RAG server providing HTTP API for code search.

**Features**:
- ChromaDB for vector storage
- Sentence-transformers for embeddings (all-MiniLM-L6-v2)
- REST API endpoints for search, indexing, and stats
- Health check endpoint

**Usage**:
```bash
# Start server
python3 scripts/rag/server.py --port 8001

# Or via service manager
./scripts/services/start-services.sh
```

**API Endpoints**:
- `GET /health` - Health check
- `POST /search` - Search for code snippets
- `POST /index` - Index new documents
- `GET /stats` - Get collection statistics

**Example Search**:
```bash
curl -X POST http://localhost:8001/search \
  -H "Content-Type: application/json" \
  -d '{"query": "authentication logic", "n_results": 5}'
```

**Example Index**:
```bash
curl -X POST http://localhost:8001/index \
  -H "Content-Type: application/json" \
  -d '{
    "documents": ["function login() { ... }"],
    "metadatas": [{"file": "auth.ts", "line": 10}],
    "ids": ["auth_ts_10"]
  }'
```

## Data Storage

RAG data is stored in:
```
~/.backlog-toolkit/rag/
â”œâ”€â”€ chroma/           # ChromaDB vector database
â””â”€â”€ cache/            # Optional response cache
```

## Dependencies

```bash
pip install flask chromadb sentence-transformers
```

## Configuration

Environment variables:
- `RAG_PORT` - Server port (default: 8001)
- `RAG_DB_PATH` - ChromaDB path (default: ~/.backlog-toolkit/rag/chroma)

## Integration

The RAG server is automatically started by:
- `scripts/services/start-services.sh`
- `claude-with-services.sh`

Skills can query RAG for relevant code context:
```python
import requests

response = requests.post('http://localhost:8001/search', json={
    'query': 'user authentication',
    'n_results': 5
})

results = response.json()['results']
```

## Performance

- **Embedding model**: all-MiniLM-L6-v2 (fast, lightweight)
- **Vector dimensions**: 384
- **Typical query time**: 10-50ms
- **Memory usage**: ~200MB base + indexed documents

## Related Documentation

- [Service Management](../services/README.md)
- [Complete Setup Guide](../../docs/tutorials/complete-setup-guide.md)


<claude-mem-context>
# Recent Activity

<!-- This section is auto-generated by claude-mem. Edit content outside the tags. -->

### Feb 18, 2026

| ID | Time | T | Title | Read |
|----|------|---|-------|------|
| #7345 | 8:52 PM | ðŸ”µ | RAG server implementation with ChromaDB and Flask | ~302 |
| #7208 | 7:25 PM | ðŸ”µ | RAG server requires Flask, ChromaDB and SentenceTransformer dependencies | ~264 |
| #7173 | 3:42 PM | ðŸŸ£ | Created RAG server documentation with API examples | ~434 |
| #7170 | 3:41 PM | ðŸŸ£ | Implemented RAG server for code search and retrieval | ~449 |

### Feb 19, 2026

| ID | Time | T | Title | Read |
|----|------|---|-------|------|
| #7999 | 5:36 PM | ðŸŸ£ | RAG integration completed across all backlog skills | ~336 |
| #7996 | " | ðŸŸ£ | Metadata filter support added to RAG /search endpoint | ~207 |
| #7966 | 5:31 PM | ðŸ”µ | RAG server implementation complete with all core features | ~309 |
| #7954 | 5:29 PM | ðŸŸ£ | File watcher with debounced RAG indexing implemented | ~317 |
| #7934 | 5:27 PM | ðŸŸ£ | RAG file watcher for automatic indexing | ~341 |
| #7931 | 5:26 PM | ðŸŸ£ | RagClient Implementation with CLI Interface | ~364 |
| #7918 | 5:24 PM | ðŸŸ£ | RAG shell client wrapper created | ~285 |
| #7878 | 5:18 PM | âœ… | RAG server UI endpoint removed | ~166 |
| #7875 | 5:14 PM | ðŸŸ£ | RAG server web UI added | ~288 |
| #7858 | 5:12 PM | ðŸŸ£ | RAG server refactored for multi-project isolation | ~316 |
| #7492 | 11:41 AM | ðŸ”µ | RAG Server Implementation Details | ~219 |
| #7473 | 11:37 AM | ðŸ”µ | Analyzed existing RAG and service infrastructure | ~339 |
</claude-mem-context>